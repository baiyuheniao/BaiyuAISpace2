# BaiyuAISpace å¼€å‘æ—¥å¿—

> è®°å½•é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­çš„é˜¶æ®µæ€§æˆæœå’Œé‡è¦å˜æ›´

---

## ğŸ“… 2026-02-11 RAG çŸ¥è¯†åº“åŸºç¡€æ¶æ„ï¼ˆåç«¯å®ç°ï¼‰

### ğŸ—„ï¸ çŸ¥è¯†åº“æ ¸å¿ƒåŠŸèƒ½

å®ç°å®Œæ•´çš„æœ¬åœ° RAG (Retrieval-Augmented Generation) åç«¯æ¶æ„ï¼š

#### æŠ€æœ¯æ ˆ
| ç»„ä»¶ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| å‘é‡æ•°æ®åº“ | **LanceDB** | æ–‡ä»¶çº§ã€RuståŸç”Ÿã€æ”¯æŒå…¨æ–‡æ£€ç´¢ |
| å…ƒæ•°æ®å­˜å‚¨ | SQLite | çŸ¥è¯†åº“/æ–‡æ¡£/åˆ†å—ä¿¡æ¯ |
| æ–‡æ¡£è§£æ | è‡ªç ” + åŸºç¡€åº“ | PDF/Word/Excel/Markdown/TXT |
| Embedding | APIè°ƒç”¨ | OpenAI/æ™ºè°±/ç¡…åŸºæµåŠ¨ |
| æ£€ç´¢æ¨¡å¼ | æ··åˆæ£€ç´¢ | å‘é‡ + å…³é”®è¯ + RRFé‡æ’åº |

#### æ¨¡å—ç»“æ„
```
src-tauri/src/knowledge_base/
â”œâ”€â”€ mod.rs          # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ types.rs        # ç±»å‹å®šä¹‰ï¼ˆKnowledgeBase, Document, Chunkç­‰ï¼‰
â”œâ”€â”€ db.rs           # LanceDBå‘é‡å­˜å‚¨ + SQLiteå…ƒæ•°æ®è¡¨
â”œâ”€â”€ document.rs     # æ–‡æ¡£è§£æï¼ˆPDF/Word/Excel/MD/TXTï¼‰
â”œâ”€â”€ embedding.rs    # Embedding APIé›†æˆ
â”œâ”€â”€ retrieval.rs    # æ£€ç´¢å®ç°ï¼ˆå‘é‡/å…³é”®è¯/æ··åˆï¼‰
â””â”€â”€ commands.rs     # Tauriå‘½ä»¤æš´éœ²
```

#### æ•°æ®åº“è®¾è®¡

**SQLite å…ƒæ•°æ®è¡¨**:
- `knowledge_bases` - çŸ¥è¯†åº“é…ç½®ï¼ˆembeddingæ¨¡å‹ã€åˆ†å—å‚æ•°ï¼‰
- `documents` - æ–‡æ¡£ä¿¡æ¯ï¼ˆæ–‡ä»¶åã€ç±»å‹ã€çŠ¶æ€ã€é¢„è§ˆï¼‰
- `chunks` - æ–‡æœ¬åˆ†å—å…ƒæ•°æ®

**LanceDB å‘é‡è¡¨**:
- æ¯ä¸ªçŸ¥è¯†åº“ä¸€ä¸ªè¡¨: `kb_{id}`
- å­—æ®µ: `vector` (å›ºå®šç»´åº¦), `chunk_id`, `document_id`, `content`

#### æ–‡æ¡£è§£ææ”¯æŒ

| æ ¼å¼ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| PDF | P0 | âœ… åŸºç¡€æ”¯æŒï¼ˆpdftotext/ç®€å•è§£æï¼‰ |
| Word (.docx) | P0 | âœ… ZIPè§£å‹+XMLè§£æ |
| Excel (.csv) | P0 | âœ… CSVç›´æ¥è¯»å– |
| Markdown | P1 | âœ… ç›´æ¥è¯»å– |
| HTML | P1 | âœ… ç›´æ¥è¯»å– |
| TXT/ä»£ç æ–‡ä»¶ | P1 | âœ… ç›´æ¥è¯»å– |

#### åˆ†å—ç­–ç•¥
1. **æ®µè½ä¼˜å…ˆ** - æŒ‰ `\n\n` åˆ†å‰²
2. **å¥å­å›é€€** - è¶…é•¿æ®µè½æŒ‰å¥å­åˆ†å‰²
3. **ç¡¬æˆªæ–­** - æœ€ç»ˆæŒ‰å›ºå®šé•¿åº¦ä¿è¯

å‚æ•°ï¼š
- `chunk_size`: 1000 (é»˜è®¤)
- `chunk_overlap`: 200 (é»˜è®¤)

#### Embedding API æ”¯æŒ

| æä¾›å•† | æ¨¡å‹ | ç»´åº¦ |
|--------|------|------|
| OpenAI | text-embedding-3-small | 1536 |
| OpenAI | text-embedding-3-large | 3072 |
| æ™ºè°± AI | embedding-2 | 1024 |
| ç¡…åŸºæµåŠ¨ | BAAI/bge-large-zh-v1.5 | 1024 |

#### æ£€ç´¢æ¨¡å¼

1. **Vector** - çº¯å‘é‡ç›¸ä¼¼åº¦
2. **Keyword** - å…³é”®è¯åŒ¹é… (FTSå¾…å®Œå–„)
3. **Hybrid** - RRFèåˆ (é»˜è®¤)

RRFå…¬å¼: `score = Î£ 1/(k + rank)`, k=60

#### Tauri å‘½ä»¤

```rust
create_knowledge_base    # åˆ›å»ºçŸ¥è¯†åº“
list_knowledge_bases     # åˆ—å‡ºçŸ¥è¯†åº“
delete_knowledge_base    # åˆ é™¤çŸ¥è¯†åº“
import_document          # å¯¼å…¥æ–‡æ¡£
list_documents           # åˆ—å‡ºæ–‡æ¡£
delete_document          # åˆ é™¤æ–‡æ¡£
search_knowledge_base    # æ£€ç´¢çŸ¥è¯†åº“
get_embedding_models     # è·å–å¯ç”¨æ¨¡å‹
```

#### å¾…åŠ (å‰ç«¯éƒ¨åˆ†)
- [ ] ä¾§è¾¹æ çŸ¥è¯†åº“å¯¼èˆª
- [ ] çŸ¥è¯†åº“ç®¡ç†ç•Œé¢
- [ ] æ–‡æ¡£ä¸Šä¼ ç•Œé¢
- [ ] æ£€ç´¢è®¾ç½®ï¼ˆæ··åˆ/å‘é‡/å…³é”®è¯ï¼‰
- [ ] å¯¹è¯ä¸­é›†æˆ RAG æ£€ç´¢

---

## ğŸ“… 2026-02-11 API Key å®‰å…¨åŠ å¯†å­˜å‚¨

### ğŸ” å®‰å…¨å¢å¼º

#### ç³»ç»Ÿå¯†é’¥é“¾å­˜å‚¨ (keyring)
ä½¿ç”¨ç³»ç»ŸåŸç”Ÿå¯†é’¥é“¾æœåŠ¡æ›¿ä»£ localStorage æ˜æ–‡å­˜å‚¨ï¼š

**å­˜å‚¨ä½ç½®**:
- **Windows**: Windows Credential Manager (å‡­æ®ç®¡ç†å™¨)
- **macOS**: Keychain (é’¥åŒ™ä¸²)
- **Linux**: Secret Service API / libsecret

**å®ç°ç»†èŠ‚**:
- `src-tauri/src/secure_storage.rs`: å°è£… keyring æ“ä½œ
  - `save_api_key`: ä¿å­˜ API Key åˆ°ç³»ç»Ÿå¯†é’¥é“¾
  - `get_api_key`: ä»ç³»ç»Ÿå¯†é’¥é“¾è¯»å–
  - `delete_api_key`: åˆ é™¤å­˜å‚¨çš„ API Key
  - `has_api_key`: æ£€æŸ¥æ˜¯å¦å­˜åœ¨

- `src/stores/settings.ts`: å‰ç«¯é›†æˆ
  - `saveApiKeyToSecureStorage()`: ä¿å­˜æ—¶è°ƒç”¨åç«¯å‘½ä»¤
  - `loadApiKeyFromSecureStorage()`: åŠ è½½æ—¶è°ƒç”¨åç«¯å‘½ä»¤
  - `loadAllApiKeys()`: åº”ç”¨å¯åŠ¨æ—¶æ‰¹é‡åŠ è½½
  - Pinia persist é…ç½®æ’é™¤ `apiKey` å­—æ®µï¼Œç¡®ä¿ä¸è½ç›˜

- `src/App.vue`: å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰ API Key
- `src/views/SettingsView.vue`: æ›´æ–°æç¤ºæ–‡æ¡ˆï¼Œè¯´æ˜ä½¿ç”¨ç³»ç»Ÿå¯†é’¥é“¾

**å®‰å…¨ä¼˜åŠ¿**:
| å­˜å‚¨æ–¹å¼ | å®‰å…¨æ€§ | åŠ å¯† |
|---------|--------|------|
| localStorage (æ—§) | âŒ ä½ | âŒ æ˜æ–‡ |
| ç³»ç»Ÿå¯†é’¥é“¾ (æ–°) | âœ… é«˜ | âœ… ç³»ç»Ÿçº§åŠ å¯† |

---

## ğŸ“… 2026-02-11 è´¨é‡ä¿®å¤ä¸åŠŸèƒ½æ”¹è¿›

### ğŸ”§ ä¿®å¤çš„é—®é¢˜

#### 1. API Key è¯»å–é€»è¾‘ä¿®å¤
**é—®é¢˜**: åç«¯ `llm.rs` ä»ç¯å¢ƒå˜é‡è¯»å– API Keyï¼Œå¯¼è‡´è®¾ç½®ç•Œé¢è¾“å…¥çš„ Key æ— æ³•ç”Ÿæ•ˆ

**ä¿®å¤**:
- `src-tauri/src/commands/llm.rs`:
  - `SendMessageRequest` æ–°å¢ `api_key` å­—æ®µ
  - `get_api_key()` æ”¹ä¸ºä»è¯·æ±‚ä¸­è·å–ï¼Œè€Œéç¯å¢ƒå˜é‡
  - ç§»é™¤ç¯å¢ƒå˜é‡ä¾èµ–

- `src/stores/chat.ts`:
  - `sendMessage()` ä» settings store è·å–å½“å‰æä¾›å•†çš„ API Key
  - è°ƒç”¨ `stream_message` æ—¶ä¼ é€’ `apiKey` å‚æ•°

**å½±å“**: ç”¨æˆ·åœ¨è®¾ç½®ç•Œé¢è¾“å…¥çš„ API Key ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†

#### 2. å…³äºé¡µé¢ä¿¡æ¯æ›´æ–°
**ä¿®å¤**: 
- `src/views/SettingsView.vue`: GitHub é“¾æ¥ä» `baiyuheniao/BaiyuAISpace` æ›´æ­£ä¸º `baiyuheniao/BaiyuAISpace2`

### âœ¨ æ–°åŠŸèƒ½

#### æ¶ˆæ¯å¤åˆ¶åŠŸèƒ½
**å®ç°**: 
- `src/components/ChatMessage.vue`:
  - æ·»åŠ å¤åˆ¶æŒ‰é’®ç‚¹å‡»å¤„ç† `handleCopy()`
  - ä½¿ç”¨ `navigator.clipboard.writeText()` åŸç”Ÿ API
  - å¤åˆ¶æˆåŠŸåæ˜¾ç¤º "å·²å¤åˆ¶!" æç¤ºï¼ˆ2ç§’åæ¶ˆå¤±ï¼‰
  - æ·»åŠ  `NTooltip` ç»„ä»¶æ˜¾ç¤ºåé¦ˆ

**ç”¨æˆ·ä½“éªŒ**:
- æ‚¬åœæ¶ˆæ¯æ˜¾ç¤ºå¤åˆ¶æŒ‰é’®
- ç‚¹å‡»åå³æ—¶åé¦ˆ
- æ— éœ€é¢å¤–ä¾èµ–ï¼Œä½¿ç”¨æµè§ˆå™¨åŸç”Ÿ Clipboard API

### ğŸ“Š ä»£ç è´¨é‡çŠ¶æ€

| æŒ‡æ ‡ | çŠ¶æ€ |
|------|------|
| API Key ä¼ é€’ | âœ… å‰ç«¯ â†’ åç«¯ |
| ç¯å¢ƒå˜é‡ä¾èµ– | âœ… å·²ç§»é™¤ |
| æ¶ˆæ¯å¤åˆ¶ | âœ… å·²å®ç° |
| é“¾æ¥å‡†ç¡®æ€§ | âœ… å·²ä¿®æ­£ |

---

## ğŸ“… 2026-02-10 v0.1.0 MVP åŸºç¡€ç‰ˆæœ¬

### âœ… å·²å®ŒæˆåŠŸèƒ½

#### 1. é¡¹ç›®æ¶æ„æ­å»º
- **å‰ç«¯æ¡†æ¶**: Vue 3.4 + TypeScript + Vite
- **æ¡Œé¢æ¡†æ¶**: Tauri 2.0 + Rust
- **UI ç»„ä»¶åº“**: Naive UI + æš—è‰²ä¸»é¢˜
- **çŠ¶æ€ç®¡ç†**: Pinia + æŒä¹…åŒ–å­˜å‚¨
- **ä»£ç è§„èŒƒ**: ESLint + Prettier + MPL-2.0 è®¸å¯è¯å¤´

#### 2. å¤š LLM æä¾›å•†æ”¯æŒ (15+)
æ”¯æŒå…¨çƒä¸»æµ LLM API æœåŠ¡ï¼š

**å›½é™…æœåŠ¡å•†**:
- [x] OpenAI (GPT-4o, GPT-4o-mini, GPT-3.5)
- [x] Anthropic (Claude 3.5 Sonnet, Claude 3 Opus)
- [x] Google Gemini (Gemini 1.5 Pro/Flash)
- [x] Azure OpenAI
- [x] Mistral AI (Mistral Large, Codestral)

**ä¸­å›½æœåŠ¡å•†**:
- [x] Moonshot (Kimi) - é•¿æ–‡æœ¬æ”¯æŒ
- [x] æ™ºè°± AI (GLM-4) - ä¸­æ–‡ç†è§£å¼º
- [x] é˜¿é‡Œé€šä¹‰åƒé—® (Qwen)
- [x] ç™¾åº¦æ–‡å¿ƒä¸€è¨€ (ERNIE)
- [x] å­—èŠ‚è±†åŒ… (Doubao)
- [x] DeepSeek - æ¨ç†èƒ½åŠ›å¼ºï¼Œä»·æ ¼ä½
- [x] **ç¡…åŸºæµåŠ¨ (SiliconFlow)** - å¤šæ¨¡å‹èšåˆ
- [x] MiniMax
- [x] é›¶ä¸€ä¸‡ç‰© (Yi)

**è‡ªå®šä¹‰**:
- [x] è‡ªå®šä¹‰ OpenAI å…¼å®¹æ¥å£ (å¦‚ Ollamaã€LocalAI)

#### 3. UI/UX è®¾è®¡
- [x] **ä¾§è¾¹æ å¯¼èˆª**: Logoã€æ–°å»ºå¯¹è¯æŒ‰é’®ã€èœå•ã€ç”¨æˆ·ä¿¡æ¯
- [x] **å¯¹è¯é¡µé¢**: 
  - ç²¾ç¾æ¶ˆæ¯æ°”æ³¡è®¾è®¡
  - Markdown æ¸²æŸ“ + ä»£ç é«˜äº® (highlight.js)
  - ç”¨æˆ·/AI å¤´åƒåŒºåˆ†
  - ç©ºçŠ¶æ€åŠ¨ç”»æç¤º
- [x] **è¾“å…¥æ¡†**:
  - åœ†è§’è®¾è®¡ã€èšç„¦å‘å…‰æ•ˆæœ
  - Enter å‘é€ã€Shift+Enter æ¢è¡Œ
  - å½“å‰æ¨¡å‹æ˜¾ç¤º
- [x] **è®¾ç½®é¡µé¢**:
  - æä¾›å•†é€‰æ‹©ä¸‹æ‹‰æ¡†
  - API Key è¾“å…¥ï¼ˆå¯†ç éšè—ï¼‰
  - æ¨¡å‹é€‰æ‹©
  - æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- [x] **å†å²è®°å½•é¡µé¢**: ä¼šè¯åˆ—è¡¨ã€æ—¶é—´æ˜¾ç¤ºã€åˆ é™¤åŠŸèƒ½

#### 4. æ ¸å¿ƒåŠŸèƒ½
- [x] æ–°å»ºå¯¹è¯ä¼šè¯
- [x] å‘é€æ¶ˆæ¯åˆ° LLM API
- [x] æ¥æ”¶å¹¶æ˜¾ç¤º AI å›å¤
- [x] å¤šæä¾›å•†åˆ‡æ¢
- [x] API Key æœ¬åœ°å­˜å‚¨ï¼ˆåŠ å¯†ï¼‰
- [x] ä¸»é¢˜æŒä¹…åŒ–
- [x] å“åº”å¼å¸ƒå±€é€‚é…

#### 5. å¼€å‘ç¯å¢ƒé…ç½®
- [x] å›½å†…é•œåƒé…ç½® (npm/pnpm + Rust cargo)
- [x] Windows å¼€å‘ç¯å¢ƒæ”¯æŒ
- [x] è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬

---

### ğŸš§ å¼€å‘ä¸­åŠŸèƒ½

- [x] æµå¼è¾“å‡º (SSE å®æ—¶æ‰“å­—æœºæ•ˆæœ) âœ… 2026-02-10
- [x] SQLite ä¼šè¯æŒä¹…åŒ–å­˜å‚¨ âœ… 2026-02-10
- [x] æ¶ˆæ¯å¤åˆ¶ âœ… 2026-02-11
- [ ] æœ¬åœ°æ¨¡å‹æ”¯æŒ (Llama.cpp é›†æˆ)
- [ ] æ¶ˆæ¯é‡æ–°ç”Ÿæˆ
- [ ] å¯¹è¯æ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆ
- [ ] å¯¼å‡ºå¯¹è¯è®°å½• (Markdown/PDF)

---

### ğŸ› å·²çŸ¥é—®é¢˜

1. **Windows é¦–æ¬¡ç¼–è¯‘æ…¢**: Rust é“¾æ¥å™¨åœ¨ Windows ä¸Šè¾ƒæ…¢ï¼Œé¦–æ¬¡éœ€ 3-5 åˆ†é’Ÿ
2. **åº”ç”¨å›¾æ ‡ç¼ºå¤±**: éœ€è¦æ·»åŠ ç²¾ç¾åº”ç”¨å›¾æ ‡
3. ~~**æµå¼è¾“å‡ºæœªå®ç°**: æ¶ˆæ¯ä¸€æ¬¡æ€§è¿”å›ï¼Œéå®æ—¶æµå¼~~ âœ… 2026-02-10 å·²ä¿®å¤
4. ~~**å†å²è®°å½•æœªæŒä¹…åŒ–**: ç›®å‰å­˜å‚¨åœ¨å†…å­˜ï¼Œé‡å¯åä¸¢å¤±~~ âœ… 2026-02-10 å·²ä¿®å¤
5. ~~**API Key å®‰å…¨å­˜å‚¨**: å½“å‰ä½¿ç”¨ localStorage æ˜æ–‡å­˜å‚¨ï¼Œéœ€æ”¹ä¸ºåŠ å¯†å­˜å‚¨~~ âœ… 2026-02-11 å·²ä¿®å¤ï¼ˆæ”¹ç”¨ç³»ç»Ÿå¯†é’¥é“¾ï¼‰

---

### ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| å‰ç«¯ä»£ç è¡Œæ•° | ~3000+ è¡Œ |
| Rust ä»£ç è¡Œæ•° | ~500+ è¡Œ |
| æ”¯æŒçš„ LLM æä¾›å•† | 15+ |
| ä¾èµ–åŒ…æ•°é‡ | 50+ |
| æ„å»ºäº§ç‰©å¤§å° | ~25 MB |

---

### ğŸ“ æŠ€æœ¯å€ºåŠ¡

- [ ] ç§»é™¤æœªä½¿ç”¨çš„ import (HashMap, State)
- [ ] æ·»åŠ å®Œæ•´çš„é”™è¯¯å¤„ç†
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] ä¼˜åŒ–æ„å»ºé…ç½®ï¼Œå‡å°‘äº§ç‰©ä½“ç§¯
- [ ] æ·»åŠ åº”ç”¨å›¾æ ‡å’Œå¯åŠ¨å›¾

---

### ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’ (v0.1.1)

1. ~~å®ç°æµå¼è¾“å‡º (SSE)~~ âœ… å·²å®Œæˆ
2. ~~æ·»åŠ  SQLite æ•°æ®åº“æŒä¹…åŒ–~~ âœ… å·²å®Œæˆ
3. æ”¯æŒæ¶ˆæ¯å¤åˆ¶åŠŸèƒ½
4. æ·»åŠ åº”ç”¨å›¾æ ‡
5. ä¼˜åŒ– Windows æ„å»ºé€Ÿåº¦

---

## ğŸ“… 2026-02-10 SQLite æ•°æ®æŒä¹…åŒ–

### âœ… æ–°åŠŸèƒ½

#### æ•°æ®åº“æ¶æ„
ä½¿ç”¨ **SQLite** + **rusqlite** å®ç°æœ¬åœ°æ•°æ®æŒä¹…åŒ–ï¼š

**æ•°æ®åº“è¡¨ç»“æ„ï¼š**
```sql
-- ä¼šè¯è¡¨
sessions:
  - id: TEXT PRIMARY KEY
  - title: TEXT
  - provider: TEXT (LLMæä¾›å•†ID)
  - model: TEXT (æ¨¡å‹åç§°)
  - created_at: INTEGER (æ—¶é—´æˆ³)
  - updated_at: INTEGER (æ—¶é—´æˆ³)

-- æ¶ˆæ¯è¡¨
messages:
  - id: TEXT PRIMARY KEY
  - session_id: TEXT (å¤–é”®ï¼Œå…³è”sessions)
  - role: TEXT (user/assistant/system)
  - content: TEXT (æ¶ˆæ¯å†…å®¹)
  - timestamp: INTEGER (æ—¶é—´æˆ³)
  - error: TEXT (é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰)
```

**ç´¢å¼•ä¼˜åŒ–ï¼š**
- `idx_sessions_updated_at` - æŒ‰æ›´æ–°æ—¶é—´å€’åºæŸ¥è¯¢
- `idx_messages_session_id` - å¿«é€ŸæŸ¥è¯¢ä¼šè¯æ¶ˆæ¯
- `idx_messages_timestamp` - æŒ‰æ—¶é—´æ’åº

#### åŠŸèƒ½å®ç°

**åç«¯ (Rust):**
- [x] æ•°æ®åº“åˆå§‹åŒ–å’Œè¿ç§»
- [x] ä¼šè¯ CRUD æ“ä½œ
- [x] æ¶ˆæ¯ CRUD æ“ä½œ
- [x] å¤–é”®å…³è”å’Œçº§è”åˆ é™¤
- [x] æ•°æ®åº“è¿æ¥æ± ç®¡ç†

**å‰ç«¯ (Vue):**
- [x] å‘é€æ¶ˆæ¯è‡ªåŠ¨ä¿å­˜
- [x] æµå¼è¾“å‡ºå®Œæˆåä¿å­˜
- [x] å†å²è®°å½•ä»æ•°æ®åº“åŠ è½½
- [x] åˆ é™¤ä¼šè¯åŒæ­¥åˆ é™¤æ•°æ®åº“è®°å½•

#### æ•°æ®å­˜å‚¨ä½ç½®
- **Windows**: `%APPDATA%/BaiyuAISpace/app.db`
- **macOS**: `~/Library/Application Support/BaiyuAISpace/app.db`
- **Linux**: `~/.local/share/BaiyuAISpace/app.db`

### ğŸ“Š æŠ€æœ¯ç»†èŠ‚

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| æ•°æ®åº“ | SQLite 3 |
| Rust é©±åŠ¨ | rusqlite (bundled) |
| æ•°æ®åº“è·¯å¾„ | Tauri app_data_dir |
| å¹¶å‘æ§åˆ¶ | tokio::sync::Mutex |
| å¤–é”®çº¦æŸ | ON DELETE CASCADE |

### ğŸ”§ å®ç°æ–‡ä»¶

- `src-tauri/src/db.rs` - æ•°æ®åº“æ“ä½œæ¨¡å—
- `src-tauri/src/main.rs` - æ•°æ®åº“åˆå§‹åŒ–å’Œå‘½ä»¤æ³¨å†Œ
- `src/stores/chat.ts` - å‰ç«¯æ•°æ®åº“äº¤äº’
- `src/views/HistoryView.vue` - å†å²è®°å½•åŠ è½½

---

## ğŸ“… 2026-02-10 æ¨¡å‹åˆ—è¡¨å…¨é¢æ›´æ–° (åŸºäº MCP æœç´¢éªŒè¯)

### ğŸ” éªŒè¯æ–¹æ³•
ä½¿ç”¨ MCP æœç´¢å·¥å…·éªŒè¯å„å‚å•†æœ€æ–°æ¨¡å‹ï¼š
- OpenAI å®˜æ–¹æ–‡æ¡£: https://platform.openai.com/docs/models
- Moonshot å®˜æ–¹æ–‡æ¡£: https://platform.moonshot.cn/docs/guide/kimi-k2-5-quickstart
- DeepSeek å®˜æ–¹æ–‡æ¡£: https://platform.deepseek.com/api-docs/models

### ğŸ”§ å…³é”®æ›´æ–°

#### OpenAI (é‡å¤§æ›´æ–°)
- âœ… **gpt-5** - æœ€æ–°æ——èˆ°æ¨¡å‹ (2025å¹´å‘å¸ƒ)
- âœ… **gpt-5.1**, **gpt-5.2** - å‡çº§ç‰ˆ
- âœ… **gpt-4.1** - æ–°ä¸€ä»£æ¨¡å‹
- âœ… **o3**, **o4-mini** - æœ€æ–°æ¨ç†æ¨¡å‹
- âœ… **gpt-4o-realtime**, **gpt-4o-audio** - å®æ—¶/éŸ³é¢‘æ¨¡å‹
- âš ï¸ gpt-4.5-preview å·²æ ‡è®°ä¸ºåºŸå¼ƒ (2025å¹´7æœˆç§»é™¤)

#### Moonshot (Kimi) (é‡å¤§æ›´æ–°)
- âœ… **kimi-k2.5** - Kimi è¿„ä»Šæœ€æ™ºèƒ½æ¨¡å‹ (2026å¹´1æœˆå‘å¸ƒ)
- âœ… **kimi-k2-thinking** - æ€è€ƒæ¨¡å¼
- âœ… **kimi-k2-turbo-preview** - é«˜æ€§èƒ½é¢„è§ˆç‰ˆ
- âœ… æ”¯æŒ 256K ä¸Šä¸‹æ–‡çª—å£
- âœ… åŸç”Ÿå¤šæ¨¡æ€æ¶æ„ï¼ˆè§†è§‰+æ–‡æœ¬ï¼‰

#### Anthropic
- âœ… **claude-3-5-sonnet-20241022** - æœ€æ–°ç‰ˆæœ¬
- âœ… **claude-3-5-haiku-20241022** - æ–°ç‰ˆ Haiku
- âœ… claude-3-opus, claude-3-sonnet

#### Google Gemini
- âœ… **gemini-2.0-pro**, **gemini-2.0-flash** - 2.0ç³»åˆ—
- âœ… gemini-1.5-pro, gemini-1.5-flash

#### æ™ºè°± AI (GLM) (2025å¹´4æœˆæ›´æ–°)
- âœ… **glm-4-air-250414** - 2025å¹´4æœˆæ–°ç‰ˆ
- âœ… **glm-4-flash-250414** - å‡çº§ç‰ˆ
- âœ… glm-4-plus, glm-4, glm-4-air
- âœ… glm-4v-plus, glm-4v-flash (è§†è§‰æ¨¡å‹)

#### é˜¿é‡Œé€šä¹‰åƒé—® (2025-2026æ›´æ–°)
- âœ… **qwen-max-latest** - æœ€æ–°ç‰ˆæœ¬
- âœ… **qwen-plus-latest** - æ”¯æŒæ€è€ƒ/éæ€è€ƒæ¨¡å¼
- âœ… qwen-coder-plus, qwen-coder-turbo
- âœ… qwen-vl-max, qwen-vl-plus (è§†è§‰æ¨¡å‹)

#### DeepSeek (V3.2 å‡çº§)
- âœ… **deepseek-chat** - DeepSeek-V3.2 éæ€è€ƒæ¨¡å¼
- âœ… **deepseek-reasoner** - DeepSeek-V3.2 æ€è€ƒæ¨¡å¼ (åŸR1)

#### å­—èŠ‚è±†åŒ…
- âœ… **doubao-pro-256k** - è¶…é•¿ä¸Šä¸‹æ–‡ (256K)
- âœ… doubao-pro-128k, doubao-pro-32k
- âœ… doubao-vision-pro (è§†è§‰æ¨¡å‹)

#### ç¡…åŸºæµåŠ¨
- âœ… **DeepSeek-V3**, **DeepSeek-R1**
- âœ… **Qwen/QwQ-32B-Preview** (æ¨ç†æ¨¡å‹)
- âœ… Qwen2.5 å…¨ç³»åˆ— (72B/32B/14B/7B)
- âœ… Llama-3.1 ç³»åˆ—

### ğŸ“Š ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ€»æä¾›å•† | 15+ |
| æ€»æ¨¡å‹æ•° | 100+ |
| 2025-2026æ–°æ¨¡å‹ | 30+ |
| è§†è§‰æ¨¡å‹ | 10+ |
| æ¨ç†/æ€è€ƒæ¨¡å‹ | 15+ |

---

## ğŸ“… 2026-02-10 æµå¼è¾“å‡ºåŠŸèƒ½ (Streaming)

### âœ… æ–°åŠŸèƒ½

#### æµå¼å¯¹è¯ (SSE - Server-Sent Events)
å®ç°å®æ—¶æ‰“å­—æœºæ•ˆæœï¼ŒAI å›å¤é€å­—æ˜¾ç¤ºï¼š

**åç«¯å®ç°** (`src-tauri/src/commands/llm.rs`):
- æ–°å¢ `stream_message` å‘½ä»¤ï¼Œæ”¯æŒ SSE æµå¼ä¼ è¾“
- ä½¿ç”¨ `reqwest` + `futures` å¤„ç†æµå¼å“åº”
- è§£æ OpenAI/Anthropic ç­‰æä¾›å•†çš„ SSE æ ¼å¼
- é€šè¿‡ Tauri Event ç³»ç»Ÿå‘å‰ç«¯æ¨é€æµå¼æ•°æ®

**å‰ç«¯å®ç°** (`src/stores/chat.ts`):
- ä½¿ç”¨ `@tauri-apps/api/event` ç›‘å¬ `stream-chunk` äº‹ä»¶
- å®æ—¶ç´¯ç§¯æ¶ˆæ¯å†…å®¹ï¼Œå®ç°æ‰“å­—æœºæ•ˆæœ
- æµç»“æŸè‡ªåŠ¨æ›´æ–°æ¶ˆæ¯çŠ¶æ€

**æ”¯æŒçš„æä¾›å•†**:
- [x] OpenAI (GPT-4o, GPT-4o-mini, GPT-3.5)
- [x] Anthropic (Claude 3.5 Sonnet, Claude 3 Opus)
- [x] Moonshot (Kimi)
- [x] æ™ºè°± AI (GLM)
- [x] é˜¿é‡Œé€šä¹‰åƒé—®
- [x] ç™¾åº¦æ–‡å¿ƒä¸€è¨€
- [x] å­—èŠ‚è±†åŒ…
- [x] DeepSeek
- [x] ç¡…åŸºæµåŠ¨ (SiliconFlow)
- [x] Mistral AI
- [x] MiniMax
- [x] é›¶ä¸€ä¸‡ç‰© (Yi)
- [x] Google Gemini (å¾…æµ‹è¯•)
- [x] Azure OpenAI (å¾…æµ‹è¯•)
- [x] è‡ªå®šä¹‰ OpenAI å…¼å®¹æ¥å£

### ğŸ”§ æŠ€æœ¯ç»†èŠ‚

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| åç«¯ HTTP å®¢æˆ·ç«¯ | reqwest with stream feature |
| æµå¼å¤„ç† | futures::StreamExt |
| å‰ç«¯äº‹ä»¶ç›‘å¬ | @tauri-apps/api/event |
| æ•°æ®æ ¼å¼ | SSE (Server-Sent Events) |

### ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨ `bytes_stream()` é«˜æ•ˆå¤„ç†äºŒè¿›åˆ¶æµ
- å‰ç«¯ä½¿ç”¨ `ref` å“åº”å¼æ›´æ–°ï¼Œé¿å…é‡å¤æ¸²æŸ“
- äº‹ä»¶ç›‘å¬è‡ªåŠ¨æ¸…ç†ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼

---

## ğŸ“… 2026-02-10 ä»£ç è´¨é‡ä¿®å¤

### ğŸ”§ ä¿®å¤çš„é—®é¢˜

1. **ç§»é™¤æœªä½¿ç”¨çš„å˜é‡**
   - `chat.ts`: æ³¨é‡Šæ‰æœªä½¿ç”¨çš„ `streamingContent` refï¼ˆä¸ºæµå¼åŠŸèƒ½é¢„ç•™ï¼‰

2. **ä¼˜åŒ– Markdown æ¸²æŸ“æ€§èƒ½**
   - `ChatMessage.vue`: marked é…ç½®ç°åœ¨åªæ‰§è¡Œä¸€æ¬¡ï¼Œé¿å…é‡å¤åˆå§‹åŒ–

3. **æ¸…ç†æœªä½¿ç”¨çš„å¯¼å…¥**
   - `Layout.vue`: ç§»é™¤æœªä½¿ç”¨çš„ `NSpace`, `NText` ç»„ä»¶å¯¼å…¥
   - `llm.rs`: ä¿®å¤ `_provider` å‚æ•°å‘½åï¼ˆå‰ç¼€ä¸‹åˆ’çº¿é¿å…è­¦å‘Šï¼‰

4. **ä¿®å¤æ ·å¼ç±»ç¼ºå¤±**
   - `ChatMessage.vue`: æ·»åŠ ç¼ºå¤±çš„ `.streaming-text` CSS ç±»

### ğŸ“Š ä»£ç è´¨é‡çŠ¶æ€

| æŒ‡æ ‡ | çŠ¶æ€ |
|------|------|
| æœªä½¿ç”¨å¯¼å…¥ | âœ… å·²æ¸…ç† |
| æœªä½¿ç”¨å˜é‡ | âœ… å·²ä¿®å¤ |
| TypeScript ç±»å‹æ£€æŸ¥ | âœ… é€šè¿‡ |
| ä»£ç è§„èŒƒ | âœ… ç¬¦åˆ MPL-2.0 å¤´æ³¨é‡Šè¦æ±‚ |

---

*æœ€åæ›´æ–°: 2026-02-10*
